  <%- include('partials/header'); -%>
  <title>Generate Bill | VIT Pharmacy</title>
  
</head>

<body>
  <%- include('partials/navbar'); -%>

  <div class="container-fluid">
    <div class="row">
      <%- include('partials/sidebar'); -%>
      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
        
        <div class="container-fluid">
          <h2>New Bill</h2>
          <a href="#medicineList" class="btn btn-link sliding-link" >Click here to check medicines list</a>
          <br><br>
          <form action="\generateBill" method="POST" oninput="calcFinalBill();">
            <div class="table-responsive">
              <table class="table table-striped table-bordered" id="billTable" style="empty-cells: hide;">
                <thead class="thead-dark">
                  <tr>
                    <th>Sr. No.</th>
                    <th>Medicine Name</th>
                    <th>MRP (in &#x20B9;)</th>
                    <th>Quantity</th>
                    <th>Expiry Date</th>
                    <th>Total</th>
                    
                  </tr>
                </thead>
                <tbody>
                  
                </tbody>
                <tfoot>
                  <tr class="">
                    <td colspan="5" style="text-align: right;">Total</td>
                    <td >
                      <input id="totalBillAmt" min="0" type="number" step="0.1" readonly class="form-control" value="0">
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </form>
        </div>
        <div class="container-fluid" id="medicineList">
        
          <h2 >Medicine List</h2>
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text"><i class="fas fa-search"></i></div>
            </div>
            <input class="form-control" id="searchMedicine" type="text" onkeyup="searchMedicine()" placeholder="Search a medicine">
          </div>
          <br>
          <div class="table-responsive">
            <table class="table table-bordered table-hover" id="myTable">
              <thead class="thead-dark">
                <tr>
                  <th></th>
                  <th>Medicine ID</th>
                  <th>Stock ID</th>
                  <th>Medicine Name</th>
                  <th>MRP (In &#x20B9;)</th>
                  <th>Company Name</th>
                  <th>Expiry Date</th>
                  <th>Available Stock</th>
                </tr>
              </thead>
              <tbody>
                <% rows.forEach(function(medicine){ %>
                  <tr id="Med<%= medicine.med_id %>Stock<%= medicine.stock_id %>">
                    <td>
                      <button class="btn btn-dark btn-sm" onclick="addMed('Med<%= medicine.med_id %>Stock<%= medicine.stock_id %>');"><i class="fas fa-plus"></i></button>
                    </td>
                    <td><%= medicine.med_id %></td>
                    <td><%= medicine.stock_id %></td>
                    <td>
                      <%= medicine.med_name %>
                      <!-- <button onclick="myFunction('<%= medicine.med_name %>')" style="float: right;" class="btn btn-dark btn-sm"><i class="fas fa-copy"></i></button> -->
                    </td>
                    <td><%= medicine.mrp %></td>
                    <td><%= medicine.name %></td>
                    <td><%= medicine.expiry_date %></td>
                    <td><%= medicine.total_number %></td>
                  </tr>        
                <% }); %>
              </tbody>
            </table>
          </div>
      </div>
      </main>
    </div>
  </div>
  <script src="bill.js"></script>
  <%- include('partials/footer'); -%>